<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> LUOYE</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/blog/favicon.png"><link rel="stylesheet" href="/blog/css/apollo.css"><style type="text/css">@font-face {
    font-family: 'Source Sans Pro';
    font-style: normal;
    font-weight: 400;
    src: local('Source Sans Pro'), local('SourceSansPro-Regular'), url(http://fontstatic.useso.com/s/sourcesanspro/v9/ODelI1aHBYDBqgeIAH2zlCxe5Tewm2_XWfbGchcXw4g.woff2) format('woff2');
    unicode-range: U+0102-0103, U+1EA0-1EF9, U+20AB;
}
@font-face {
    font-family: 'Source Sans Pro';
    font-style: normal;
    font-weight: 400;
    src: local('Source Sans Pro'), local('SourceSansPro-Regular'), url(http://fontstatic.useso.com/s/sourcesanspro/v9/ODelI1aHBYDBqgeIAH2zlIa1YDtoarzwSXxTHggEXMw.woff2) format('woff2');
    unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
    font-family: 'Source Sans Pro';
    font-style: normal;
    font-weight: 400;
    src: local('Source Sans Pro'), local('SourceSansPro-Regular'), url(http://fontstatic.useso.com/s/sourcesanspro/v9/ODelI1aHBYDBqgeIAH2zlJbPFduIYtoLzwST68uhz_Y.woff2) format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
@font-face {
    font-family: 'Source Sans Pro';
    font-style: normal;
    font-weight: 600;
    src: local('Source Sans Pro Semibold'), local('SourceSansPro-Semibold'), url(http://fontstatic.useso.com/s/sourcesanspro/v9/toadOcfmlt9b38dHJxOBGMZXFz2iDKd7GJNSaxRYiSj3rGVtsTkPsbDajuO5ueQw.woff2) format('woff2');
    unicode-range: U+0102-0103, U+1EA0-1EF9, U+20AB;
}
@font-face {
    font-family: 'Source Sans Pro';
    font-style: normal;
    font-weight: 600;
    src: local('Source Sans Pro Semibold'), local('SourceSansPro-Semibold'), url(http://fontstatic.useso.com/s/sourcesanspro/v9/toadOcfmlt9b38dHJxOBGKyGJhAh-RE0BxGcd_izyev3rGVtsTkPsbDajuO5ueQw.woff2) format('woff2');
    unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
    font-family: 'Source Sans Pro';
    font-style: normal;
    font-weight: 600;
    src: local('Source Sans Pro Semibold'), local('SourceSansPro-Semibold'), url(http://fontstatic.useso.com/s/sourcesanspro/v9/toadOcfmlt9b38dHJxOBGMzFoXZ-Kj537nB_-9jJhlA.woff2) format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}</style></head><body><div class="wrap"><header><a href="/blog/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/blog" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/blog/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://www.zhihu.com/people/luo-ye-42-22" target="_blank" class="nav-list-link">ZHIHU</a></li><li class="nav-list-item"><a href="https://github.com/luoye-fe" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/blog/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><ul class="home post-list"><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/blog/2016/12/02/write-a-nodejs-proxy-support-http-https/" class="post-title-link">write-a-nodejs-proxy-support-http/https</a></h2><div class="post-info">2016年12月2日</div><div class="post-content"><p>web 开发的调试过程不可避免的涉及到代理的问题，当然现在很多工具都可以完成这项工作，比如 Win 下的 <code>Fiddler</code>，Mac 下的 <code>Charles</code>，今天我们来看一下怎么用 <code>NodeJS</code> 完成这些代理工作，当然，必须支持 <code>http/https</code> 两种常见协议。  </p>
<h3 id="代理原理"><a href="#代理原理" class="headerlink" title="代理原理"></a>代理原理</h3><p>要想实现代理的目的，就得有一个代理服务的存在，客户端的请求不会直接到达服务器，而是先经过代理服务，然后由代理服务来处理这个请求，不管是原样的转发到目标服务器，还是拦截下来做自定义的回复。</p>
<p>下图来自《HTTP权威指南》，直观的展示了一个代理服务所做的工作：</p>
<p>  </p>
<p>实现这个客户端请求转发到代理服务的工具当然可以用系统的代理配置，不过推荐使用 <code>Chrome</code> 的一个插件 <a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif" target="_blank" rel="external">Proxy SwitchyOmega</a>.  </p>
<h3 id="创建-HTTP-代理服务"><a href="#创建-HTTP-代理服务" class="headerlink" title="创建 HTTP 代理服务"></a>创建 HTTP 代理服务</h3><p>了解了代理的原理之后，我们来实现一个简单的代理服务：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</div><div class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</div><div class="line">http.createServer()  </div><div class="line">    .on(<span class="string">'request'</span>, (req, res) =&gt; &#123;</div><div class="line">        <span class="comment">// 解析请求参数</span></div><div class="line">        <span class="keyword">const</span> urlObj = url.parse(req.url);</div><div class="line">        <span class="keyword">const</span> options = &#123;</div><div class="line">            <span class="attr">hostname</span>: urlObj.hostname,  </div><div class="line">            <span class="attr">port</span>: urlObj.port || <span class="number">80</span>,</div><div class="line">            <span class="attr">path</span>: urlObj.path,</div><div class="line">            <span class="attr">method</span>: req.method,</div><div class="line">            <span class="attr">headers</span>: req.headers</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// 新建一个请求到真实服务器</span></div><div class="line">        <span class="keyword">const</span> pReq = http.request(options, <span class="function"><span class="keyword">function</span>(<span class="params">curRes</span>) </span>&#123;</div><div class="line">            res.writeHead(curRes.statusCode, curRes.headers);</div><div class="line">            <span class="comment">// 返回给浏览器</span></div><div class="line">            curRes.pipe(res);</div><div class="line">        &#125;).on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">            res.end();</div><div class="line">        &#125;);</div><div class="line">        req.pipe(pReq);</div><div class="line">    &#125;)</div><div class="line">    .listen(<span class="number">8080</span>);</div></pre></td></tr></table></figure>
<br></div><a href="/blog/2016/12/02/write-a-nodejs-proxy-support-http-https/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/blog/2016/07/21/git相关/" class="post-title-link">git相关</a></h2><div class="post-info">2016年7月21日</div><div class="post-content"><h2 id="git-开始"><a href="#git-开始" class="headerlink" title="git 开始"></a>git 开始</h2><ul>
<li><p><a href="https://git-scm.com/" target="_blank" rel="external">git 下载</a></p>
</li>
<li><p><a href="https://git-for-windows.github.io/" target="_blank" rel="external">git for windows</a></p>
</li>
</ul>
<h2 id="git-文章推荐"><a href="#git-文章推荐" class="headerlink" title="git 文章推荐"></a>git 文章推荐</h2><ul>
<br></div><a href="/blog/2016/07/21/git相关/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/blog/2016/07/13/客服平台总结/" class="post-title-link">客服平台总结</a></h2><div class="post-info">2016年7月13日</div><div class="post-content"><h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><p>Vue是一个构建数据驱动的 web 界面的库，也就是一个以 MVVM 为核心的库。  </p>
<h4 id="为什么选择Vue"><a href="#为什么选择Vue" class="headerlink" title="为什么选择Vue"></a>为什么选择Vue</h4><ul>
<li><p>简洁</p>
<p>  API 足够简洁明了，文档足够清晰有条理，上手难度足够低</p>
<p>  HTML 模板加上 JSON 数据，就是一个 Vue 实例。    </p>
</li>
<li><p>数据驱动</p>
<br></div><a href="/blog/2016/07/13/客服平台总结/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/blog/2016/06/23/我的sublime配置/" class="post-title-link">我的sublime配置</a></h2><div class="post-info">2016年6月23日</div><div class="post-content"><h2 id="功能插件"><a href="#功能插件" class="headerlink" title="功能插件"></a>功能插件</h2><ul>
<li><p>Emmet</p>
<p>  写 <code>html</code> 的利器，不用多说</p>
</li>
<li><p>Babel  </p>
<p>  不仅能够识别更多的js方言，让sublime有正确的着色，而且能够支持ES6的语法提示等</p>
</li>
<br></div><a href="/blog/2016/06/23/我的sublime配置/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/blog/2016/06/09/js中的异步流程控制-Promise-Generators-Async-Await/" class="post-title-link">js中的异步流程控制--Promise/Generator/Async/Await</a></h2><div class="post-info">2016年6月9日</div><div class="post-content"><blockquote>
<p>长文预警 ～</p>
</blockquote>
<p>异步I/O、事件驱动使JS这个单线程语言在不阻塞的情况下可以并行的执行很多任务，这带来了性能的极大提升，并且更加符合人们的自然认识（烧一壶水，期间你肯定不会等着水烧开再去做别的事，异步才是正常的啊！）。然而异步风格也给流程控制，错误处理带来了更多的麻烦。</p>
<h3 id="一、回调"><a href="#一、回调" class="headerlink" title="一、回调"></a>一、回调</h3><p>回调是JS的基础，函数可以作为参数传递并在恰当的时机执行，比如有下面的三个函数：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">f1();</div><div class="line">f2();</div><div class="line">f3();</div></pre></td></tr></table></figure>
<p>如果 <code>f1</code> 中存在异步操作，比如 <code>ajax</code> 请求，并且 <code>f2</code> 需要在 <code>f1</code> 执行完毕之后执行，那么可以使用回调的方式改写函数，如下：  </p>
<br></div><a href="/blog/2016/06/09/js中的异步流程控制-Promise-Generators-Async-Await/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/blog/2016/06/05/会声会影安装与激活/" class="post-title-link">会声会影安装与激活</a></h2><div class="post-info">2016年6月5日</div><div class="post-content"><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><ul>
<li><a href="http://www.huishenghuiying.com.cn/xiazai.html#selctbuy" target="_blank" rel="external">会声会影下载</a></li>
<li><a href="https://hostr.co/file/FDp8MOYlRuHv/AppNee.com.Corel.X5-X9.All.Products.Universal.Keygen.7z?warning=on" target="_blank" rel="external">会声会影注册机下载</a></li>
</ul>
<h2 id="安装（x8版本）"><a href="#安装（x8版本）" class="headerlink" title="安装（x8版本）"></a>安装（x8版本）</h2><h4 id="1、找到下载好的以-exe-为结尾的安装文件，将后缀名改为-rar，然后打开此压缩包（不是解压，用360压缩等工具打开）"><a href="#1、找到下载好的以-exe-为结尾的安装文件，将后缀名改为-rar，然后打开此压缩包（不是解压，用360压缩等工具打开）" class="headerlink" title="1、找到下载好的以 .exe 为结尾的安装文件，将后缀名改为 .rar，然后打开此压缩包（不是解压，用360压缩等工具打开）"></a>1、找到下载好的以 <code>.exe</code> 为结尾的安装文件，将后缀名改为 <code>.rar</code>，然后打开此压缩包（不是解压，用360压缩等工具打开）</h4><h4 id="2、打开压缩包中的-setup-xml"><a href="#2、打开压缩包中的-setup-xml" class="headerlink" title="2、打开压缩包中的 setup.xml"></a>2、打开压缩包中的 <code>setup.xml</code></h4><ul>
<li>搜索 <code>SHOWSERIALDIALOG</code>，将其 <code>value</code> 改为 <code>true</code></li>
<li>搜索 <code>SERIALNUMBER</code>，将其 <code>value</code> 删除</li>
<br></div><a href="/blog/2016/06/05/会声会影安装与激活/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/blog/2016/05/24/webpack-workflow/" class="post-title-link">webpack-workflow</a></h2><div class="post-info">2016年5月24日</div><div class="post-content"><h2 id="前端工作流中要解决的问题"><a href="#前端工作流中要解决的问题" class="headerlink" title="前端工作流中要解决的问题"></a>前端工作流中要解决的问题</h2><ul>
<li>资源管理：模块化、组件化、依赖管理等</li>
<li>开发流程：dev、debug、proxy、build、deploy</li>
<li>周边工具：图形化界面、命令行辅助、自动化工程</li>
</ul>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li><a href="http://webpack.github.io/" target="_blank" rel="external">webpack官网</a>  </li>
<br></div><a href="/blog/2016/05/24/webpack-workflow/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/blog/2016/04/12/use-webpack-in-your-node-app/" class="post-title-link">用 webpack 构建 node 后端代码，使其支持 js 新特性并实现热重载</a></h2><div class="post-info">2016年4月12日</div><div class="post-content"><p>webpack 在前端领域的模块化和代码构建方面有着无比强大的功能，通过一些特殊的配置甚至可以实现前端代码的实时构建、ES6/7新特性支持以及热重载，这些功能同样可以运用于后台 nodejs 的应用，让后台的开发更加顺畅，服务更加灵活，怎么来呢？往下看。</p>
<p>先梳理下我们将要解决的问题：</p>
<ul>
<li>node端代码构建</li>
<li>ES6/7 新特性支持</li>
<li>node服务代码热重载</li>
</ul>
<br></div><a href="/blog/2016/04/12/use-webpack-in-your-node-app/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/blog/2016/03/20/mobile-debug/" class="post-title-link">mobile-debug</a></h2><div class="post-info">2016年3月20日</div><div class="post-content"><h4 id="UC浏览器开发版（仅限安卓平台）"><a href="#UC浏览器开发版（仅限安卓平台）" class="headerlink" title="UC浏览器开发版（仅限安卓平台）"></a>UC浏览器开发版（仅限安卓平台）</h4><blockquote>
<p>超级强大，样式、脚本、资源，都可以调试，而且UC在移动端份额最大，针对性很高。</p>
</blockquote>
<p>1、 <a href="http://plus.uc.cn/document/webapp/doc5.html" target="_blank" rel="external">UC浏览器开发版</a></p>
<p>2、 官方的文档已经很详细了，包括两种调试方法，无线和有线。有线的调试很复杂，需要ADB工具，需要数据线，所以还是直接无线调试比较好。</p>
<p>3、 无线调试方法简记：</p>
<ul>
<br></div><a href="/blog/2016/03/20/mobile-debug/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/blog/2015/12/31/2015年终总结/" class="post-title-link">2015年终总结</a></h2><div class="post-info">2015年12月31日</div><div class="post-content"><blockquote>
<p>踏入社会的第一年，每年的年终总结应该记起来了。默默的定下一个应一直坚持的小事。</p>
</blockquote>
<p>2015，从校园到社会；2015，从徐州到北京；2015，从骆也到骆也。2015，颇具转折意义的一年。</p>
<h3 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h3><p>2015年初，还在焦急的等待考研的结果，或许自己已经知道答案。但是查到分数那一刻还是有点不甘心，回想之前一年为考研做的准备，哎，只能说，努力就好。</p>
<p>人最不应该的就是在原地等待。考研没有结果，我知道自己该做个选择了。选择什么？包括未来在内的所有一切。</p>
<p>毕业了选择什么职业？那时候脑海中的目标真心明确，就是前端。现在想想啊，真是为自己以一个纯文科愣头青身份去投身程序员行业而感到后怕。</p>
<br></div><a href="/blog/2015/12/31/2015年终总结/" class="read-more">...阅读全文</a></article></li></ul></section><footer><div class="paginator"></div><div class="copyright"><p>© 2015 - 2016 <a href="http://luoye.pw/blog">Luoye</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-78104533-1",'auto');ga('send','pageview');</script></body></html>